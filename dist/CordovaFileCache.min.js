var CordovaFileCache=function(t){function r(n){if(o[n])return o[n].exports;var e=o[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var o={};return r.m=t,r.c=o,r.i=function(t){return t},r.d=function(t,o,n){r.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(o,"a",o),o},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=1)}([function(t,r){var o=function(){"use strict";function t(t,r){var o=t.l+r.l,n={h:t.h+r.h+(o/2>>>31)>>>0,l:o>>>0};t.h=n.h,t.l=n.l}function r(t,r){t.h^=r.h,t.h>>>=0,t.l^=r.l,t.l>>>=0}function o(t,r){var o={h:t.h<<r|t.l>>>32-r,l:t.l<<r|t.h>>>32-r};t.h=o.h,t.l=o.l}function n(t){var r=t.l;t.l=t.h,t.h=r}function e(e,i,a,h){t(e,i),t(a,h),o(i,13),o(h,16),r(i,e),r(h,a),n(e),t(a,i),t(e,h),o(i,17),o(h,21),r(i,a),r(h,e),n(a)}function i(t,r){return t.charCodeAt(r+3)<<24|t.charCodeAt(r+2)<<16|t.charCodeAt(r+1)<<8|t.charCodeAt(r)}function a(t,o){var n,a={h:t[1]>>>0,l:t[0]>>>0},h={h:t[3]>>>0,l:t[2]>>>0},s={h:a.h,l:a.l},u=a,c={h:h.h,l:h.l},l=h,f=0,d=o.length,p=d-7,v=new Uint8Array(new ArrayBuffer(8));for(r(s,{h:1936682341,l:1886610805}),r(c,{h:1685025377,l:1852075907}),r(u,{h:1819895653,l:1852142177}),r(l,{h:1952801890,l:2037671283});f<p;)n={h:i(o,f+4),l:i(o,f)},r(l,n),e(s,c,u,l),e(s,c,u,l),r(s,n),f+=8;v[7]=d;for(var _=0;f<d;)v[_++]=o.charCodeAt(f++);for(;_<7;)v[_++]=0;n={h:v[7]<<24|v[6]<<16|v[5]<<8|v[4],l:v[3]<<24|v[2]<<16|v[1]<<8|v[0]},r(l,n),e(s,c,u,l),e(s,c,u,l),r(s,n),r(u,{h:0,l:238}),e(s,c,u,l),e(s,c,u,l),e(s,c,u,l),e(s,c,u,l);var g={h:s.h,l:s.l};r(g,c),r(g,u),r(g,l),r(c,{h:0,l:221}),e(s,c,u,l),e(s,c,u,l),e(s,c,u,l),e(s,c,u,l);var y=s;return r(y,c),r(y,u),r(y,l),[y.h,y.l,g.h,g.l]}function h(t){return[i(t,0),i(t,4),i(t,8),i(t,12)]}function s(t,r){var o=a(t,r);return("0000000"+o[0].toString(16)).substr(-8)+("0000000"+o[1].toString(16)).substr(-8)+("0000000"+o[2].toString(16)).substr(-8)+("0000000"+o[3].toString(16)).substr(-8)}function u(t,r){var o=a(t,r);return 4294967296*(2097151&o.h)+o.l}return{string16_to_key:h,hash:a,hash_hex:s,hash_uint:u}}(),n=[4282878338,2967121564,3731938874,2445636991],t=t||{};t.exports=function(t){return o.hash(n,t).join("")}},function(t,r,o){function n(t){var r=this;if(this._fs=t.fs,!this._fs)throw new Error('Missing required option "fs". Add an instance of cordova-promise-fs.');i=this._fs.Promise,this._mirrorMode="hash"!==t.mode,this._retry=t.retry||[500,1500,8e3],this._cacheBuster=!!t.cacheBuster,this.localRoot=this._fs.normalize(t.localRoot||"data"),this.serverRoot=this._fs.normalize(t.serverRoot||""),this._downloading=[],this._added=[],this._cached={},this.ready=this._fs.ensure(this.localRoot).then(function(t){return r.localInternalURL="function"==typeof t.toInternalURL?t.toInternalURL():t.toURL(),r.localUrl=t.toURL(),r.list()})}var e=o(0),i=null;n.hash=e,n.prototype.getCached=function(){return this._cached},n.prototype.list=function(){var t=this;return new i(function(r,o){t._fs.list(t.localRoot,"rfe").then(function(o){t._cached={},o=o.map(function(r){var o=t._fs.normalize(r.fullPath);return t._cached[o]={toInternalURL:"function"==typeof r.toInternalURL?r.toInternalURL():r.toURL(),toURL:r.toURL()},o}),r(o)},function(){r([])})})},n.prototype.add=function(t){t||(t=[]),"string"==typeof t&&(t=[t]);var r=this;return t.forEach(function(t){t=r.toServerURL(t),-1===r._added.indexOf(t)&&r._added.push(t)}),r.isDirty()},n.prototype.remove=function(t,r){t||(t=[]);var o=[];"string"==typeof t&&(t=[t]);var n=this;return t.forEach(function(t){var r=n._added.indexOf(n.toServerURL(t));r>=0&&n._added.splice(r,1);var e=n.toPath(t);o.push(n._fs.remove(e)),delete n._cached[e]}),r?i.all(o):n.isDirty()},n.prototype.getDownloadQueue=function(){var t=this;return t._added.filter(function(r){return!t.isCached(r)})},n.prototype.getAdded=function(){return this._added},n.prototype.isDirty=function(){return this.getDownloadQueue().length>0},n.prototype.download=function(t,r){var o=this._fs,n=this;return r=r||!1,n.abort(),new i(function(e,i){o.ensure(n.localRoot).then(function(){return n.list()}).then(function(){if(!n.isDirty())return void e(n);var a=n.getDownloadQueue(),h=n._downloading.length,s=n._downloading.length+a.length,u=0,c=[];a.forEach(function(a){var l,f=n.toPath(a);"function"==typeof t&&(l=function(r){r.queueIndex=h,r.queueSize=s,r.url=a,r.path=f,r.percentage=h/s,r.loaded>0&&r.total>0&&h!==s&&(r.percentage+=r.loaded/r.total/s),r.percentage=Math.max(u,r.percentage),u=r.percentage,t(r)});var d=function(){h++,l&&l(new ProgressEvent),h===s&&(n._downloading=[],n.list().then(function(){l&&l(new ProgressEvent),n.isDirty()||0!==c.length?i(c):e(n)},i))},p=function(t){t&&t.target&&t.target.error&&(t=t.target.error),c.push(t),d()},v=a;n._cacheBuster&&(v+="?"+Date.now());var _=o.download(v,f,{retry:n._retry},r&&l?l:void 0);_.then(d,p),n._downloading.push(_)})},i)})},n.prototype.abort=function(){this._downloading.forEach(function(t){t.abort()}),this._downloading=[]},n.prototype.isCached=function(t){return t=this.toPath(t),!!this._cached[t]},n.prototype.clear=function(){var t=this;return this._cached={},this._fs.removeDir(this.localRoot).then(function(){return t._fs.ensure(t.localRoot)})},n.prototype.toInternalURL=function(t){var r=this.toPath(t);return this._cached[r]?this._cached[r].toInternalURL:t},n.prototype.get=function(t){var r=this.toPath(t);return this._cached[r]?this._cached[r].toURL:this.toServerURL(t)},n.prototype.toDataURL=function(t){return this._fs.toDataURL(this.toPath(t))},n.prototype.toURL=function(t){var r=this.toPath(t);return this._cached[r]?this._cached[r].toURL:t},n.prototype.toServerURL=function(t){var t=this._fs.normalize(t);return t.indexOf("://")<0?this.serverRoot+t:t},n.prototype.toPath=function(t){if(this._mirrorMode){var r=t.indexOf("?");r>-1&&(t=t.substr(0,r)),t=this._fs.normalize(t||"");var o=this.serverRoot.length;return t.substr(0,o)!==this.serverRoot?this.localRoot+t:this.localRoot+t.substr(o)}var n=t.match(/\.[a-z,0-9]{1,}/g);return n=n?n[n.length-1]:".txt",this.localRoot+e(t)+n},t.exports=n}]);